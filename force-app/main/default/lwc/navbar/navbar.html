<template>
    <header class="header">
        <nav class="navbar">
            <a onclick={gotoHome} class="brand">TimeSheet Pro</a>
            <div class="user-menu">
                <div class="punch-btns">
                    <button if:true={punchedIn} class="btn-punch-in" id="punchInBtn" onclick={openPunchForm}>Punch In</button>
                    <button if:true={punchedOut} class="btn-punch-out" id="punchOutBtn" onclick={checkUserPunchHour}>Punch Out</button>
                </div>
                <div class="user-info">
                    <button class="user-btn" onclick={toggleUserDropdown}>
                        {fullName}
                    </button>
                    <div class="dropdown-menu" id="userDropdown" if:true={userDropdown}>
                        <div class="dropdown-item" onclick={gotoProfile}>Profile</div>
                        <div class="dropdown-item" onclick={gotoReport}>Reports</div>
                        <div class="dropdown-item" onclick={logOutUser}>Logout</div>
                    </div>
                </div>
            </div>
        </nav>
    </header>

    <div class="loader" if:true={isLoading}>
        <lightning-spinner
            alternative-text="Loading..."
            size="medium"
            variant="brand">
        </lightning-spinner>
    </div>

    <div class="modal" id="punchModal" if:true={showPunchModal}>
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title" id="punchModalTitle">Punch In</h3>
                <button class="modal-close" onclick={closeModal}>&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group" id="workLocationGroup">
                    <label class="form-label">Select Work Location</label>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" name="workingMode" value="Work from Home" id="workHome" onchange={handleOptionChange}>
                            <label for="workHome">Work from Home</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="workingMode" value="Work from Office" id="workOffice" onchange={handleOptionChange}>
                            <label for="workOffice">Work from Office</label>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick={closeModal}>Cancel</button>
                <button class="btn btn-primary" onclick={punchInUser}>
                    <span id="punchActionText">Punch In</span>
                </button>
            </div>
        </div>
    </div>

    <!-- Warning Modal  -->
    <div class="modal" if:true={showWarning}>
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title-warning">Warning</h3>
                <button class="modal-close" onclick={closeWarningModal}>&times;</button>
            </div>
            <div class="modal-body">
                <div class="modal-body-text">
                    You have not completed your 9 hours yet.<br/>
                    Do you still want to punch Out?<br/>
                    Time Left: {timeLeft}

                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick={closeWarningModal}>Cancel</button>
                <button class="btn btn-primary" data-id="punchOutAnyway" onclick={punchOutUser}>
                    <span>Punch Out Anyway</span>
                </button>
            </div>
        </div>
    </div>

</template>
